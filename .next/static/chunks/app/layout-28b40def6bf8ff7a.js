(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9565:function(e,t,r){Promise.resolve().then(r.t.bind(r,1034,23)),Promise.resolve().then(r.bind(r,8726)),Promise.resolve().then(r.t.bind(r,3054,23)),Promise.resolve().then(r.bind(r,698)),Promise.resolve().then(r.bind(r,3998))},698:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),s=r(3998),i=r(7138),o=r(6463),a=r(8726);function l(){let{user:e,loading:t,signOut:r}=(0,s.a)(),l=(0,o.useRouter)(),u=async()=>{try{await r(),a.ZP.success("Signed out successfully"),l.push("/")}catch(e){console.error("Sign out error:",e),a.ZP.error("Failed to sign out")}};return t?null:(0,n.jsx)("nav",{className:"bg-white shadow",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i.default,{href:"/",className:"text-xl font-bold text-blue-600",children:"Roadmap Generator"})}),(0,n.jsx)("div",{className:"flex items-center",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{href:"/dashboard",className:"mx-4 text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(0,n.jsx)("button",{onClick:u,className:"text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium",children:"Sign out"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{href:"/login",className:"mx-4 text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium",children:"Log in"}),(0,n.jsx)(i.default,{href:"/signup",className:"text-white bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium",children:"Sign up"})]})})]})})})}},4316:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(7327).eI)("https://itzecympleovransjovy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml0emVjeW1wbGVvdnJhbnNqb3Z5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwODE2NjAsImV4cCI6MjA4MjY1NzY2MH0.gbpHNxaI67Xi7bMYpyNXqbapcB9z32ckKDlyZXM9CnA")},3998:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return u}});var n=r(7437),s=r(2265),i=r(4316),o=r(6463);let a=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(!0),d=(0,o.useRouter)();(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{console.log("Getting initial auth session...");let{data:{session:t},error:r}=await i.O.auth.getSession();if(r){console.error("Error getting session:",r),e&&(l(null),c(!1));return}if(console.log("Session retrieved:",t?"authenticated":"not authenticated"),(null==t?void 0:t.user)&&e)try{let{data:e}=await i.O.from("users").select("id").eq("id",t.user.id).single();if(!e){console.log("Creating user record...");let{error:e}=await i.O.from("users").insert([{id:t.user.id,email:t.user.email}]);e&&console.error("Error inserting user:",e)}}catch(e){console.error("Error handling user creation:",e)}e&&(l((null==t?void 0:t.user)||null),c(!1)),console.log("Setting up auth state listener...");let{data:{subscription:n}}=i.O.auth.onAuthStateChange(async(t,r)=>{if(console.log("Auth state changed:",t,r?"authenticated":"not authenticated"),(null==r?void 0:r.user)&&"SIGNED_IN"===t&&e)try{let{data:e}=await i.O.from("users").select("id").eq("id",r.user.id).single();if(!e){console.log("Creating user record on sign in...");let{error:e}=await i.O.from("users").insert([{id:r.user.id,email:r.user.email}]);e&&console.error("Error inserting user on sign in:",e)}}catch(e){console.error("Error handling user creation on sign in:",e)}e&&(l((null==r?void 0:r.user)||null),c(!1),"SIGNED_OUT"===t&&d.push("/"))});return()=>{console.log("Cleaning up auth subscription"),n.unsubscribe()}}catch(t){console.error("Critical error in getInitialSession:",t),e&&(l(null),c(!1))}})(),()=>{e=!1}},[d]);let h=async(e,t)=>{let{data:r,error:n}=await i.O.auth.signUp({email:e,password:t,options:{emailRedirectTo:"".concat(window.location.origin,"/dashboard")}});if(n)throw n;if(r.user){let{error:e}=await i.O.from("users").insert([{id:r.user.id,email:r.user.email}]);e&&console.error("Error inserting user:",e)}return r},m=async(e,t)=>{let{data:r,error:n}=await i.O.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r},f=async()=>{let{error:e}=await i.O.auth.signOut();if(e)throw e};return(0,n.jsx)(a.Provider,{value:{user:r,loading:u,signUp:h,signIn:m,signOut:f},children:t})}function u(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useUser must be used within an AuthProvider");return e}},3054:function(){},1034:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[6,705,4,971,23,744],function(){return e(e.s=9565)}),_N_E=e.O()}]);